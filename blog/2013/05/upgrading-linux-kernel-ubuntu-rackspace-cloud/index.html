<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>KenCochrane.net</title>
    <meta name="description" content="">
    <meta name="author" content="Ken Cochrane">
    <link href="http://kencochrane.net/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="KenCochrane.net Atom Feed" />
    <link href="http://kencochrane.net/rss/all.rss" type="application/rss+xml" rel="alternate" title="KenCochrane.net RSS Feed" />
    <link rel="icon" href="http://kencochrane.net/static/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="http://kencochrane.net/static/favicon.ico" type="image/x-icon">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
        <script src="http://kencochrane.net/theme/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="http://kencochrane.net/theme/bootstrap.min.css" rel="stylesheet">
    <link href="http://kencochrane.net/theme/local.css" rel="stylesheet">
    <link href="http://kencochrane.net/theme/css/font-awesome.css" rel="stylesheet">
    <link href="http://kencochrane.net/theme/pygments.css" rel="stylesheet">
    <style type="text/css">

      .sidebar-nav {
        padding: 9px 0;
      }
      .tag-1 {
        font-size: 13pt;
      }
      .tag-2 {
        font-size: 10pt;
      }
      .tag-2 {
        font-size: 8pt;
      }
      .tag-4 {
        font-size: 6pt;
     }
    </style>
<script type="text/javascript">
	var disqus_identifier = "blog/2013/05/upgrading-linux-kernel-ubuntu-rackspace-cloud/";
	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = 'http://kencochrane.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
</head>
<body>
    <div class="topbar">
      <div class="topbar-inner">
        <div class="container-fluid">
          <a class="brand" href="http://kencochrane.net/index.html">KenCochrane.net</a>
            <ul class="nav">
                        <li><a href="http://kencochrane.net/about/index.html">About Me</a></li>
                        <li><a href="http://kencochrane.net/projects/index.html">Projects</a></li>
                    <li class="active"><a href="http://kencochrane.net/category/blog.html">blog</a></li>
                 <li><script data-gratipay-username="kencochrane"
        data-gratipay-widget="button"
        src="//grtp.co/v1.js"></script>
                  </li>
            </ul>
            <p class="pull-right"><a href="http://kencochrane.net/archives.html">[archives]</a> <a href="http://kencochrane.net/tags.html">[tags]</a></p>
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="sidebar">
        <div class="well">
            <div class="social">
            <h3>Social</h3>
            <ul>
                <li><a href="http://twitter.com/kencochrane">twitter</a></li>
                <li><a href="https://github.com/kencochrane">github</a></li>
                    <li><a href="http://kencochrane.net/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>
                    <li><a href="http://kencochrane.net/rss/all.rss" type="application/rss+xml" rel="alternate">rss feed</a></li>
            </ul>
            </div>

            <h4><i class="icon-tags icon-large"></i>Tags</h4>
            <ul>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/tutorial.html">
                        <i class="icon-tag icon-large"></i>tutorial
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/install.html">
                        <i class="icon-tag icon-large"></i>install
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/video.html">
                        <i class="icon-tag icon-large"></i>video
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/djangomaine.html">
                        <i class="icon-tag icon-large"></i>djangomaine
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/macosx.html">
                        <i class="icon-tag icon-large"></i>macosx
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/pci.html">
                        <i class="icon-tag icon-large"></i>pci
                    </a>
                </li>
                <li class="tag-1">
                    <a href="http://kencochrane.net/tag/python.html">
                        <i class="icon-tag icon-large"></i>python
                    </a>
                </li>
                <li class="tag-2">
                    <a href="http://kencochrane.net/tag/ubuntu.html">
                        <i class="icon-tag icon-large"></i>ubuntu
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/mercurial.html">
                        <i class="icon-tag icon-large"></i>Mercurial
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/requests.html">
                        <i class="icon-tag icon-large"></i>requests
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/blog.html">
                        <i class="icon-tag icon-large"></i>blog
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/clickstream.html">
                        <i class="icon-tag icon-large"></i>clickstream
                    </a>
                </li>
                <li class="tag-3">
                    <a href="http://kencochrane.net/tag/epio.html">
                        <i class="icon-tag icon-large"></i>epio
                    </a>
                </li>
                <li class="tag-3">
                    <a href="http://kencochrane.net/tag/mysql.html">
                        <i class="icon-tag icon-large"></i>mysql
                    </a>
                </li>
                <li class="tag-3">
                    <a href="http://kencochrane.net/tag/djangozoom.html">
                        <i class="icon-tag icon-large"></i>djangozoom
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/job.html">
                        <i class="icon-tag icon-large"></i>job
                    </a>
                </li>
                <li class="tag-1">
                    <a href="http://kencochrane.net/tag/deployment.html">
                        <i class="icon-tag icon-large"></i>deployment
                    </a>
                </li>
                <li class="tag-2">
                    <a href="http://kencochrane.net/tag/heroku.html">
                        <i class="icon-tag icon-large"></i>heroku
                    </a>
                </li>
                <li class="tag-3">
                    <a href="http://kencochrane.net/tag/work.html">
                        <i class="icon-tag icon-large"></i>work
                    </a>
                </li>
                <li class="tag-1">
                    <a href="http://kencochrane.net/tag/django.html">
                        <i class="icon-tag icon-large"></i>django
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/facebook.html">
                        <i class="icon-tag icon-large"></i>facebook
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/recruiters.html">
                        <i class="icon-tag icon-large"></i>recruiters
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/memcached.html">
                        <i class="icon-tag icon-large"></i>memcached
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/django-maine.html">
                        <i class="icon-tag icon-large"></i>django-maine
                    </a>
                </li>
                <li class="tag-2">
                    <a href="http://kencochrane.net/tag/dotcloud.html">
                        <i class="icon-tag icon-large"></i>dotcloud
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/raspberrypi.html">
                        <i class="icon-tag icon-large"></i>raspberrypi
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/newrelic.html">
                        <i class="icon-tag icon-large"></i>newrelic
                    </a>
                </li>
                <li class="tag-2">
                    <a href="http://kencochrane.net/tag/djangocms.html">
                        <i class="icon-tag icon-large"></i>djangocms
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/supervisord.html">
                        <i class="icon-tag icon-large"></i>supervisord
                    </a>
                </li>
                <li class="tag-3">
                    <a href="http://kencochrane.net/tag/apphosted.html">
                        <i class="icon-tag icon-large"></i>apphosted
                    </a>
                </li>
                <li class="tag-2">
                    <a href="http://kencochrane.net/tag/centos5.html">
                        <i class="icon-tag icon-large"></i>centos5
                    </a>
                </li>
                <li class="tag-3">
                    <a href="http://kencochrane.net/tag/cashstar.html">
                        <i class="icon-tag icon-large"></i>cashstar
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/go.html">
                        <i class="icon-tag icon-large"></i>go
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/apache.html">
                        <i class="icon-tag icon-large"></i>apache
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/s3.html">
                        <i class="icon-tag icon-large"></i>s3
                    </a>
                </li>
                <li class="tag-1">
                    <a href="http://kencochrane.net/tag/hosting.html">
                        <i class="icon-tag icon-large"></i>hosting
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/openshift.html">
                        <i class="icon-tag icon-large"></i>openshift
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/jobs.html">
                        <i class="icon-tag icon-large"></i>jobs
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/fabric.html">
                        <i class="icon-tag icon-large"></i>fabric
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/redis.html">
                        <i class="icon-tag icon-large"></i>redis
                    </a>
                </li>
                <li class="tag-2">
                    <a href="http://kencochrane.net/tag/lxc.html">
                        <i class="icon-tag icon-large"></i>lxc
                    </a>
                </li>
                <li class="tag-2">
                    <a href="http://kencochrane.net/tag/docker.html">
                        <i class="icon-tag icon-large"></i>docker
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/defender.html">
                        <i class="icon-tag icon-large"></i>defender
                    </a>
                </li>
                <li class="tag-2">
                    <a href="http://kencochrane.net/tag/rhel5.html">
                        <i class="icon-tag icon-large"></i>rhel5
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/nginx.html">
                        <i class="icon-tag icon-large"></i>nginx
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/api.html">
                        <i class="icon-tag icon-large"></i>api
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/aws.html">
                        <i class="icon-tag icon-large"></i>aws
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/guidebook.html">
                        <i class="icon-tag icon-large"></i>guidebook
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/stackato.html">
                        <i class="icon-tag icon-large"></i>stackato
                    </a>
                </li>
                <li class="tag-1">
                    <a href="http://kencochrane.net/tag/paas.html">
                        <i class="icon-tag icon-large"></i>paas
                    </a>
                </li>
                <li class="tag-3">
                    <a href="http://kencochrane.net/tag/gunicorn.html">
                        <i class="icon-tag icon-large"></i>gunicorn
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/script.html">
                        <i class="icon-tag icon-large"></i>script
                    </a>
                </li>
                <li class="tag-3">
                    <a href="http://kencochrane.net/tag/percona.html">
                        <i class="icon-tag icon-large"></i>percona
                    </a>
                </li>
                <li class="tag-3">
                    <a href="http://kencochrane.net/tag/rackspace.html">
                        <i class="icon-tag icon-large"></i>rackspace
                    </a>
                </li>
                <li class="tag-3">
                    <a href="http://kencochrane.net/tag/gondor.html">
                        <i class="icon-tag icon-large"></i>gondor
                    </a>
                </li>
                <li class="tag-2">
                    <a href="http://kencochrane.net/tag/linux.html">
                        <i class="icon-tag icon-large"></i>linux
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/sentry.html">
                        <i class="icon-tag icon-large"></i>sentry
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/raspbian.html">
                        <i class="icon-tag icon-large"></i>raspbian
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/pelican.html">
                        <i class="icon-tag icon-large"></i>pelican
                    </a>
                </li>
                <li class="tag-3">
                    <a href="http://kencochrane.net/tag/upgrade.html">
                        <i class="icon-tag icon-large"></i>upgrade
                    </a>
                </li>
                <li class="tag-2">
                    <a href="http://kencochrane.net/tag/aufs.html">
                        <i class="icon-tag icon-large"></i>aufs
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/startup.html">
                        <i class="icon-tag icon-large"></i>startup
                    </a>
                </li>
                <li class="tag-2">
                    <a href="http://kencochrane.net/tag/kernel.html">
                        <i class="icon-tag icon-large"></i>kernel
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/supervisor.html">
                        <i class="icon-tag icon-large"></i>supervisor
                    </a>
                </li>
                <li class="tag-4">
                    <a href="http://kencochrane.net/tag/digital-ocean.html">
                        <i class="icon-tag icon-large"></i>digital-ocean
                    </a>
                </li>
            </ul>

        </div>
      </div>
      <div class="content">
	<div class='article'>
		<div class="page-header"><h1>Upgrading the Ubuntu linux kernel on Rackspace cloud</h1></div>
		<div class="well small">Permalink: <a class="more" href="http://kencochrane.net/blog/2013/05/upgrading-linux-kernel-ubuntu-rackspace-cloud/">2013-05-12 12:41:48-04:00</a>
by <a class="url fn" href="http://kencochrane.net/author/ken-cochrane.html">Ken Cochrane</a> in <a href="http://kencochrane.net/category/blog.html">blog</a>
tags: <a href="http://kencochrane.net/tag/rackspace.html">rackspace</a> <a href="http://kencochrane.net/tag/kernel.html">kernel</a> <a href="http://kencochrane.net/tag/ubuntu.html">ubuntu</a> </div>
		<div><p>Yesterday I wrote a <a class="reference external" href="http://kencochrane.net/blog/2013/05/running-docker-on-rackspace-cloud/">blog post</a> on how to install <a class="reference external" href="http://www.docker.io">Docker</a> on to <a class="reference external" href="http://www.rackspace.com/cloud/servers/">RackSpace Cloud</a>, and one of the steps was to upgrade the kernel to the lastest one so that Docker would be nice and stable. The problem that I found out was that there wasn't much information how to upgrade the kernel on the Rackspace Cloud servers, so I thought I would put the steps here.</p>
<p>The goal here is to upgrade Ubuntu 12.04 and 12.10 so that it has the same kernel as 13.04. Here are the steps.</p>
<div class="section" id="ubuntu-12-04">
<h2>Ubuntu 12.04</h2>
<ol class="arabic">
<li><p class="first">Build an Ubuntu 12.04 server using the &quot;Next generation cloud servers&quot;, with your desired size. It will give you the password, keep that you will need it later.</p>
</li>
<li><p class="first">When the server is up and running ssh into the server.</p>
<blockquote>
<div class="highlight"><pre><span class="nv">$ </span>ssh root@&lt;server-ip&gt;
</pre></div>
</blockquote>
</li>
<li><p class="first">Once you are logged in you should check what kernel version you are running.</p>
<blockquote>
<div class="highlight"><pre><span class="nv">$ </span>uname -a
Linux docker-12-04 3.2.0-38-virtual <span class="c">#61-Ubuntu SMP Tue Feb 19 12:37:47 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux</span>
</pre></div>
</blockquote>
</li>
<li><p class="first">Let's update the server package list</p>
<blockquote>
<div class="highlight"><pre><span class="nv">$ </span>apt-get update
</pre></div>
</blockquote>
</li>
<li><p class="first">Install the 3.8.x kernel using the PPA</p>
<blockquote>
<div class="highlight"><pre><span class="c"># install the new kernel</span>
<span class="nv">$ </span>apt-get install linux-generic-lts-raring

<span class="c"># update grub so it will use the new kernel after we reboot</span>
<span class="nv">$ </span>update-grub

<span class="c"># update-grub doesn&#39;t always work so lets make sure. ``/boot/grub/menu.lst`` was updated.</span>
<span class="nv">$ </span>grep 3.8.0- /boot/grub/menu.lst

<span class="c"># nope it wasn&#39;t lets manually update ``/boot/grub/menu.lst``  (make sure you are searching for correct kernel version, look at initial uname -a results.)</span>
<span class="nv">$ </span>sed -i s/3.2.0-38-virtual/3.8.0-19-generic/ /boot/grub/menu.lst

<span class="c"># once again lets make sure it worked.</span>
<span class="nv">$ </span>grep 3.8.0- /boot/grub/menu.lst
title          Ubuntu 12.04.2 LTS, kernel 3.8.0-19-generic
kernel          /boot/vmlinuz-3.8.0-19-generic <span class="nv">root</span><span class="o">=</span>/dev/xvda1 ro quiet splash <span class="nv">console</span><span class="o">=</span>hvc0
initrd          /boot/initrd.img-3.8.0-19-generic
title          Ubuntu 12.04.2 LTS, kernel 3.8.0-19-generic <span class="o">(</span>recovery mode<span class="o">)</span>
kernel          /boot/vmlinuz-3.8.0-19-generic <span class="nv">root</span><span class="o">=</span>/dev/xvda1 ro quiet splash  single
initrd          /boot/initrd.img-3.8.0-19-generic

<span class="c"># much better.</span>
</pre></div>
</blockquote>
</li>
<li><p class="first">Reboot server (either via command line or console)</p>
</li>
<li><p class="first">login again and check to make sure the kernel was updated</p>
<blockquote>
<div class="highlight"><pre><span class="nv">$ </span>ssh root@&lt;server_ip&gt;
<span class="nv">$ </span>uname -a
Linux docker-12-04 3.8.0-19-generic <span class="c">#30~precise1-Ubuntu SMP Wed May 1 22:26:36 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux</span>

<span class="c"># nice 3.8.</span>
</pre></div>
</blockquote>
</li>
</ol>
</div>
<div class="section" id="ubuntu-12-10">
<h2>Ubuntu 12.10</h2>
<ol class="arabic">
<li><p class="first">Build an Ubuntu 12.10 server using the &quot;Next generation cloud servers&quot;, with your desired size. It will give you the password, keep that you will need it later.</p>
</li>
<li><p class="first">When the server is up and running ssh into the server.</p>
<blockquote>
<div class="highlight"><pre><span class="nv">$ </span>ssh root@&lt;server-ip&gt;
</pre></div>
</blockquote>
</li>
<li><p class="first">Once you are logged in you should check what kernel version you are running.</p>
<blockquote>
<div class="highlight"><pre><span class="nv">$ </span>uname -a
Linux docker-12-10 3.5.0-25-generic <span class="c">#39-Ubuntu SMP Mon Feb 25 18:26:58 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux</span>
</pre></div>
</blockquote>
</li>
<li><p class="first">Let's update the server package list</p>
<blockquote>
<div class="highlight"><pre><span class="nv">$ </span>apt-get update
</pre></div>
</blockquote>
</li>
<li><p class="first">Install the 3.8.x kernel using the ubuntu-x-swat PPA</p>
<blockquote>
<div class="highlight"><pre><span class="c"># add the ppa to get the right kernel package</span>
<span class="nv">$ </span><span class="nb">echo </span>deb http://ppa.launchpad.net/ubuntu-x-swat/q-lts-backport/ubuntu quantal main &gt; /etc/apt/sources.list.d/xswat.list

<span class="c"># add the key for the ppa</span>
<span class="nv">$ </span>sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 3B22AB97AF1CDFA9

<span class="c"># update packages again</span>
<span class="nv">$ </span>apt-get update

<span class="c"># install the new kernel</span>
<span class="nv">$ </span>apt-get install linux-image-3.8.0-19-generic

<span class="c"># make sure grub has been updated.</span>
<span class="nv">$ </span>grep 3.8.0- /boot/grub/menu.lst
title   Ubuntu 12.10, kernel 3.8.0-19-generic
kernel  /boot/vmlinuz-3.8.0-19-generic <span class="nv">root</span><span class="o">=</span>/dev/xvda1 ro quiet splash <span class="nv">console</span><span class="o">=</span>hvc0
initrd  /boot/initrd.img-3.8.0-19-generic
title   Ubuntu 12.10, kernel 3.8.0-19-generic <span class="o">(</span>recovery mode<span class="o">)</span>
kernel  /boot/vmlinuz-3.8.0-19-generic <span class="nv">root</span><span class="o">=</span>/dev/xvda1 ro quiet splash  single
initrd  /boot/initrd.img-3.8.0-19-generic

<span class="c"># looks good. If it doesn&#39;t work for you, look at the notes for 12.04 to fix.</span>
</pre></div>
</blockquote>
</li>
<li><p class="first">Reboot server (either via command line or console)</p>
</li>
<li><p class="first">login again and check to make sure the kernel was updated</p>
<blockquote>
<div class="highlight"><pre><span class="nv">$ </span>ssh root@&lt;server_ip&gt;
<span class="nv">$ </span>uname -a
Linux docker-12-10 3.8.0-19-generic <span class="c">#29~precise2-Ubuntu SMP Fri Apr 19 16:15:35 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux</span>

<span class="c"># nice 3.8.</span>
</pre></div>
</blockquote>
</li>
</ol>
</div>
</div>
		<div>
			<h2>Comments</h2>
<a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="KenCochrane">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
<div id="disqus_thread"></div>		<div>
	</div>	
        <footer>
          <p> Powered by <a href="http://getpelican.com">Pelican</a>, theme based on <a href="http://twitter.github.com/bootstrap/">Bootstrap, from Twitter</a>.</p>
          <p>&copy; Ken Cochrane 2015</p>
        </footer>
      </div>

    </div>
<div class="container-fluid">
<script>var _gaq=[['_setAccount','UA-67696-11'],['_trackPageview']];(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.src='//www.google-analytics.com/ga.js';s.parentNode.insertBefore(g,s)}(document,'script'))</script>
</div>
</body>
</html>